<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>hw05</title>

<script src="hw05_files/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="hw05_files/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="hw05_files/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="hw05_files/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="hw05_files/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="hw05_files/navigation-1.1/tabsets.js"></script>
<link href="hw05_files/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="hw05_files/highlightjs-9.12.0/highlight.js"></script>
<script src="hw05_files/htmlwidgets-1.2/htmlwidgets.js"></script>
<script src="hw05_files/plotly-binding-4.8.0/plotly.js"></script>
<script src="hw05_files/typedarray-0.1/typedarray.min.js"></script>
<link href="hw05_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="hw05_files/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="hw05_files/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="hw05_files/plotly-main-1.39.2/plotly-latest.min.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>



<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="fluid-row" id="header">



<h1 class="title toc-ignore">hw05</h1>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This is the assignment5 of STAT545, which would mainly focus on the skills of factor, I/O and visual design. The file is well organised by four parts:</p>
<ul>
<li>Factor Management</li>
<li>File Import/Export</li>
<li>Visualization Design</li>
<li>Writing Figures to File</li>
</ul>
<p>Let’s start it with loading the packages.</p>
<pre class="r"><code>suppressPackageStartupMessages(library(tidyverse))</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.1</code></pre>
<pre><code>## Warning: package &#39;forcats&#39; was built under R version 3.5.1</code></pre>
<pre class="r"><code>suppressPackageStartupMessages(library(plotly))</code></pre>
<pre><code>## Warning: package &#39;plotly&#39; was built under R version 3.5.1</code></pre>
<pre class="r"><code>suppressPackageStartupMessages(library(gapminder))</code></pre>
<pre><code>## Warning: package &#39;gapminder&#39; was built under R version 3.5.1</code></pre>
</div>
<div id="part-1-factor-management" class="section level2">
<h2>Part 1: Factor management</h2>
<ul>
<li><strong>Drop factor / levels</strong></li>
</ul>
<p>To figure out the function of <code>droplevels</code>, Oceania is dropped here.</p>
<pre class="r"><code>before_drop &lt;- gapminder %&gt;% 
  filter(continent != &quot;Oceania&quot;) </code></pre>
<pre><code>## Warning: package &#39;bindrcpp&#39; was built under R version 3.5.1</code></pre>
<pre class="r"><code>levels(before_drop$continent)</code></pre>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;   &quot;Oceania&quot;</code></pre>
<pre class="r"><code>after_drop &lt;- droplevels(before_drop) 
levels(after_drop$continent)</code></pre>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;</code></pre>
<p>From the above, we could see that <code>droplevels()</code> function removes unused factor Ocenia in continent.</p>
<ul>
<li><strong>Reorder levels based on knowledge from data</strong></li>
</ul>
<p>In this section, the effects of <code>arrange()</code> and <code>fct_reorder()</code> are dicusssed in three dimensions: table, levels and figure.</p>
<ol style="list-style-type: decimal">
<li>Firstly, let’s look into the continent of original dataset.</li>
</ol>
<pre class="r"><code>knitr::kable(head(gapminder)) # report the first factor in the table</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">year</th>
<th align="right">lifeExp</th>
<th align="right">pop</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1952</td>
<td align="right">28.801</td>
<td align="right">8425333</td>
<td align="right">779.4453</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1957</td>
<td align="right">30.332</td>
<td align="right">9240934</td>
<td align="right">820.8530</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1962</td>
<td align="right">31.997</td>
<td align="right">10267083</td>
<td align="right">853.1007</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1967</td>
<td align="right">34.020</td>
<td align="right">11537966</td>
<td align="right">836.1971</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1972</td>
<td align="right">36.088</td>
<td align="right">13079460</td>
<td align="right">739.9811</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1977</td>
<td align="right">38.438</td>
<td align="right">14880372</td>
<td align="right">786.1134</td>
</tr>
</tbody>
</table>
<pre class="r"><code>levels(gapminder$continent) # report the order of factors</code></pre>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;   &quot;Oceania&quot;</code></pre>
<pre class="r"><code>gapminder %&gt;% 
  ggplot(aes(x = continent)) +
  geom_bar() # demonstrate the sequence of levels in the plot</code></pre>
<p><img src="hw05_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<ol start="2" style="list-style-type: decimal">
<li>Then try to <code>arrange()</code> the continent in descending order. See what would happen.</li>
</ol>
<pre class="r"><code>df &lt;- gapminder %&gt;% 
  arrange(desc(continent))

knitr::kable(head(df))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">year</th>
<th align="right">lifeExp</th>
<th align="right">pop</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1952</td>
<td align="right">69.12</td>
<td align="right">8691212</td>
<td align="right">10039.60</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1957</td>
<td align="right">70.33</td>
<td align="right">9712569</td>
<td align="right">10949.65</td>
</tr>
<tr class="odd">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1962</td>
<td align="right">70.93</td>
<td align="right">10794968</td>
<td align="right">12217.23</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1967</td>
<td align="right">71.10</td>
<td align="right">11872264</td>
<td align="right">14526.12</td>
</tr>
<tr class="odd">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1972</td>
<td align="right">71.93</td>
<td align="right">13177000</td>
<td align="right">16788.63</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1977</td>
<td align="right">73.49</td>
<td align="right">14074100</td>
<td align="right">18334.20</td>
</tr>
</tbody>
</table>
<pre class="r"><code>levels(df$continent)</code></pre>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Asia&quot;     &quot;Europe&quot;   &quot;Oceania&quot;</code></pre>
<pre class="r"><code>df %&gt;% 
  ggplot(aes(x = continent)) +
  geom_bar()</code></pre>
<p><img src="hw05_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>As observed, the first factor listed in the table has changed to Oceania since <code>arrange()</code>. However, it doesn’t have a effect on the levels and graph.</p>
<ol start="3" style="list-style-type: decimal">
<li>Move to <code>fct_reorder</code> now. Order the continent level by the max of life expectancy.</li>
</ol>
<pre class="r"><code>df &lt;- gapminder %&gt;% 
  mutate(continent = fct_reorder(continent,.fun=max,lifeExp))

knitr::kable(head(df))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">year</th>
<th align="right">lifeExp</th>
<th align="right">pop</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1952</td>
<td align="right">28.801</td>
<td align="right">8425333</td>
<td align="right">779.4453</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1957</td>
<td align="right">30.332</td>
<td align="right">9240934</td>
<td align="right">820.8530</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1962</td>
<td align="right">31.997</td>
<td align="right">10267083</td>
<td align="right">853.1007</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1967</td>
<td align="right">34.020</td>
<td align="right">11537966</td>
<td align="right">836.1971</td>
</tr>
<tr class="odd">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1972</td>
<td align="right">36.088</td>
<td align="right">13079460</td>
<td align="right">739.9811</td>
</tr>
<tr class="even">
<td align="left">Afghanistan</td>
<td align="left">Asia</td>
<td align="right">1977</td>
<td align="right">38.438</td>
<td align="right">14880372</td>
<td align="right">786.1134</td>
</tr>
</tbody>
</table>
<pre class="r"><code>levels(df$continent)</code></pre>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Oceania&quot;  &quot;Europe&quot;   &quot;Asia&quot;</code></pre>
<pre class="r"><code>df %&gt;% 
  ggplot(aes(x = continent)) +
  geom_bar()</code></pre>
<p><img src="hw05_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p><code>fct_reorder</code> has no effect on the contents of table. But the order of levels indeed changes. And the sequence in the graph always follows the levels.</p>
<ol start="4" style="list-style-type: decimal">
<li>Last, use both <code>fct_order</code> and <code>arrange</code> here.</li>
</ol>
<pre class="r"><code>df &lt;- gapminder %&gt;% 
  arrange(desc(continent)) %&gt;% 
  mutate(continent = fct_reorder(continent, .fun=max, lifeExp))

knitr::kable(head(df))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">country</th>
<th align="left">continent</th>
<th align="right">year</th>
<th align="right">lifeExp</th>
<th align="right">pop</th>
<th align="right">gdpPercap</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1952</td>
<td align="right">69.12</td>
<td align="right">8691212</td>
<td align="right">10039.60</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1957</td>
<td align="right">70.33</td>
<td align="right">9712569</td>
<td align="right">10949.65</td>
</tr>
<tr class="odd">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1962</td>
<td align="right">70.93</td>
<td align="right">10794968</td>
<td align="right">12217.23</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1967</td>
<td align="right">71.10</td>
<td align="right">11872264</td>
<td align="right">14526.12</td>
</tr>
<tr class="odd">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1972</td>
<td align="right">71.93</td>
<td align="right">13177000</td>
<td align="right">16788.63</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="left">Oceania</td>
<td align="right">1977</td>
<td align="right">73.49</td>
<td align="right">14074100</td>
<td align="right">18334.20</td>
</tr>
</tbody>
</table>
<pre class="r"><code>levels(df$continent)</code></pre>
<pre><code>## [1] &quot;Africa&quot;   &quot;Americas&quot; &quot;Oceania&quot;  &quot;Europe&quot;   &quot;Asia&quot;</code></pre>
<pre class="r"><code>df %&gt;% 
  ggplot(aes(x = continent)) +
  geom_bar()</code></pre>
<p><img src="hw05_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>It can be concluded that the effects of two functions mix together. The table follows <code>arrange</code> and the levels follow <code>fct_reorder</code>.</p>
</div>
<div id="part-2-file-io" class="section level2">
<h2>Part 2: File I/O</h2>
<p>Out of convenience, use <code>df</code>(non-alphabetical) from the previous section to test.</p>
<pre class="r"><code>write_csv(df,&quot;my_df.csv&quot;)
read_df &lt;- read_csv(&quot;my_df.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   country = col_character(),
##   continent = col_character(),
##   year = col_integer(),
##   lifeExp = col_double(),
##   pop = col_integer(),
##   gdpPercap = col_double()
## )</code></pre>
<pre class="r"><code>summary(read_df)</code></pre>
<pre><code>##    country           continent              year         lifeExp     
##  Length:1704        Length:1704        Min.   :1952   Min.   :23.60  
##  Class :character   Class :character   1st Qu.:1966   1st Qu.:48.20  
##  Mode  :character   Mode  :character   Median :1980   Median :60.71  
##                                        Mean   :1980   Mean   :59.47  
##                                        3rd Qu.:1993   3rd Qu.:70.85  
##                                        Max.   :2007   Max.   :82.60  
##       pop              gdpPercap       
##  Min.   :6.001e+04   Min.   :   241.2  
##  1st Qu.:2.794e+06   1st Qu.:  1202.1  
##  Median :7.024e+06   Median :  3531.8  
##  Mean   :2.960e+07   Mean   :  7215.3  
##  3rd Qu.:1.959e+07   3rd Qu.:  9325.5  
##  Max.   :1.319e+09   Max.   :113523.1</code></pre>
<pre class="r"><code>head(read_df)</code></pre>
<pre><code>## # A tibble: 6 x 6
##   country   continent  year lifeExp      pop gdpPercap
##   &lt;chr&gt;     &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
## 1 Australia Oceania    1952    69.1  8691212    10040.
## 2 Australia Oceania    1957    70.3  9712569    10950.
## 3 Australia Oceania    1962    70.9 10794968    12217.
## 4 Australia Oceania    1967    71.1 11872264    14526.
## 5 Australia Oceania    1972    71.9 13177000    16789.
## 6 Australia Oceania    1977    73.5 14074100    18334.</code></pre>
<pre class="r"><code>levels(read_df)</code></pre>
<pre><code>## NULL</code></pre>
<p>The new df from csv file stores the contents of original table, but it lose the factors.</p>
</div>
<div id="part-3-visualization-design" class="section level2">
<h2>Part 3: Visualization design</h2>
<p>This graph shows how the mean of life expectancy changes in five continents.</p>
<pre class="r"><code>p &lt;- gapminder %&gt;% 
  group_by(continent,year) %&gt;% 
  summarise(mean = mean(lifeExp)) %&gt;% 
  ggplot(aes(y = mean,x = year)) +
  facet_wrap(~ continent) +
  geom_line() 
p</code></pre>
<p><img src="hw05_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>It’s correct but not good. Let’s make it more juicy now.</p>
<pre class="r"><code>p_new &lt;- p +
  geom_point(aes(color = continent)) + # colored by continent
  labs(x = &quot;Year&quot;,
          y = &quot;Mean of Life Expectancy&quot;,
          title = &quot;The mean of life expectancy over time in five continents&quot;) + # change the axis-label&#39;s names and add the title
  theme_bw() + # apply the theme
  theme(axis.text = element_text(size=7), # adjust the size of axis-text
          strip.background = element_rect(fill= &quot;orange&quot;) # fill the background of banner
        )
p_new</code></pre>
<p><img src="hw05_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>All the changes are mentioned in the in-line code comments. The new graph is much better to diffentiate the five continents and understand what the values represent.</p>
<p>Next up, convert this graph to a <code>plotly</code> one.(Shown in the <img src="" alt="html" /> file)</p>
<pre class="r"><code>ggplotly(p_new)</code></pre>
<div id="htmlwidget-d42caba952ca0b1f0338" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-d42caba952ca0b1f0338">{"x":{"data":[{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[39.1355,41.2663461538462,43.3194423076923,45.3345384615385,47.4509423076923,49.5804230769231,51.5928653846154,53.3447884615385,53.6295769230769,53.5982692307692,53.3252307692308,54.8060384615385],"text":["year: 1952<br />mean: 39.13550","year: 1957<br />mean: 41.26635","year: 1962<br />mean: 43.31944","year: 1967<br />mean: 45.33454","year: 1972<br />mean: 47.45094","year: 1977<br />mean: 49.58042","year: 1982<br />mean: 51.59287","year: 1987<br />mean: 53.34479","year: 1992<br />mean: 53.62958","year: 1997<br />mean: 53.59827","year: 2002<br />mean: 53.32523","year: 2007<br />mean: 54.80604"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[53.27984,55.96028,58.39876,60.41092,62.39492,64.39156,66.22884,68.09072,69.56836,71.15048,72.42204,73.60812],"text":["year: 1952<br />mean: 53.27984","year: 1957<br />mean: 55.96028","year: 1962<br />mean: 58.39876","year: 1967<br />mean: 60.41092","year: 1972<br />mean: 62.39492","year: 1977<br />mean: 64.39156","year: 1982<br />mean: 66.22884","year: 1987<br />mean: 68.09072","year: 1992<br />mean: 69.56836","year: 1997<br />mean: 71.15048","year: 2002<br />mean: 72.42204","year: 2007<br />mean: 73.60812"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[46.3143939393939,49.3185442424242,51.563223030303,54.66364,57.3192690909091,59.6105563636364,62.6179393939394,64.8511818181818,66.5372121212121,68.0205151515152,69.2338787878788,70.7284848484849],"text":["year: 1952<br />mean: 46.31439","year: 1957<br />mean: 49.31854","year: 1962<br />mean: 51.56322","year: 1967<br />mean: 54.66364","year: 1972<br />mean: 57.31927","year: 1977<br />mean: 59.61056","year: 1982<br />mean: 62.61794","year: 1987<br />mean: 64.85118","year: 1992<br />mean: 66.53721","year: 1997<br />mean: 68.02052","year: 2002<br />mean: 69.23388","year: 2007<br />mean: 70.72848"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[64.4085,66.7030666666667,68.5392333333333,69.7376,70.7750333333333,71.9377666666667,72.8064,73.6421666666667,74.4401,75.5051666666667,76.7006,77.6486],"text":["year: 1952<br />mean: 64.40850","year: 1957<br />mean: 66.70307","year: 1962<br />mean: 68.53923","year: 1967<br />mean: 69.73760","year: 1972<br />mean: 70.77503","year: 1977<br />mean: 71.93777","year: 1982<br />mean: 72.80640","year: 1987<br />mean: 73.64217","year: 1992<br />mean: 74.44010","year: 1997<br />mean: 75.50517","year: 2002<br />mean: 76.70060","year: 2007<br />mean: 77.64860"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[69.255,70.295,71.085,71.31,71.91,72.855,74.29,75.32,76.945,78.19,79.74,80.7195],"text":["year: 1952<br />mean: 69.25500","year: 1957<br />mean: 70.29500","year: 1962<br />mean: 71.08500","year: 1967<br />mean: 71.31000","year: 1972<br />mean: 71.91000","year: 1977<br />mean: 72.85500","year: 1982<br />mean: 74.29000","year: 1987<br />mean: 75.32000","year: 1992<br />mean: 76.94500","year: 1997<br />mean: 78.19000","year: 2002<br />mean: 79.74000","year: 2007<br />mean: 80.71950"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(0,0,0,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[39.1355,41.2663461538462,43.3194423076923,45.3345384615385,47.4509423076923,49.5804230769231,51.5928653846154,53.3447884615385,53.6295769230769,53.5982692307692,53.3252307692308,54.8060384615385],"text":["continent: Africa<br />year: 1952<br />mean: 39.13550","continent: Africa<br />year: 1957<br />mean: 41.26635","continent: Africa<br />year: 1962<br />mean: 43.31944","continent: Africa<br />year: 1967<br />mean: 45.33454","continent: Africa<br />year: 1972<br />mean: 47.45094","continent: Africa<br />year: 1977<br />mean: 49.58042","continent: Africa<br />year: 1982<br />mean: 51.59287","continent: Africa<br />year: 1987<br />mean: 53.34479","continent: Africa<br />year: 1992<br />mean: 53.62958","continent: Africa<br />year: 1997<br />mean: 53.59827","continent: Africa<br />year: 2002<br />mean: 53.32523","continent: Africa<br />year: 2007<br />mean: 54.80604"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(248,118,109,1)"}},"hoveron":"points","name":"Africa","legendgroup":"Africa","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[53.27984,55.96028,58.39876,60.41092,62.39492,64.39156,66.22884,68.09072,69.56836,71.15048,72.42204,73.60812],"text":["continent: Americas<br />year: 1952<br />mean: 53.27984","continent: Americas<br />year: 1957<br />mean: 55.96028","continent: Americas<br />year: 1962<br />mean: 58.39876","continent: Americas<br />year: 1967<br />mean: 60.41092","continent: Americas<br />year: 1972<br />mean: 62.39492","continent: Americas<br />year: 1977<br />mean: 64.39156","continent: Americas<br />year: 1982<br />mean: 66.22884","continent: Americas<br />year: 1987<br />mean: 68.09072","continent: Americas<br />year: 1992<br />mean: 69.56836","continent: Americas<br />year: 1997<br />mean: 71.15048","continent: Americas<br />year: 2002<br />mean: 72.42204","continent: Americas<br />year: 2007<br />mean: 73.60812"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(163,165,0,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(163,165,0,1)"}},"hoveron":"points","name":"Americas","legendgroup":"Americas","showlegend":true,"xaxis":"x2","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[46.3143939393939,49.3185442424242,51.563223030303,54.66364,57.3192690909091,59.6105563636364,62.6179393939394,64.8511818181818,66.5372121212121,68.0205151515152,69.2338787878788,70.7284848484849],"text":["continent: Asia<br />year: 1952<br />mean: 46.31439","continent: Asia<br />year: 1957<br />mean: 49.31854","continent: Asia<br />year: 1962<br />mean: 51.56322","continent: Asia<br />year: 1967<br />mean: 54.66364","continent: Asia<br />year: 1972<br />mean: 57.31927","continent: Asia<br />year: 1977<br />mean: 59.61056","continent: Asia<br />year: 1982<br />mean: 62.61794","continent: Asia<br />year: 1987<br />mean: 64.85118","continent: Asia<br />year: 1992<br />mean: 66.53721","continent: Asia<br />year: 1997<br />mean: 68.02052","continent: Asia<br />year: 2002<br />mean: 69.23388","continent: Asia<br />year: 2007<br />mean: 70.72848"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,191,125,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,191,125,1)"}},"hoveron":"points","name":"Asia","legendgroup":"Asia","showlegend":true,"xaxis":"x3","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[64.4085,66.7030666666667,68.5392333333333,69.7376,70.7750333333333,71.9377666666667,72.8064,73.6421666666667,74.4401,75.5051666666667,76.7006,77.6486],"text":["continent: Europe<br />year: 1952<br />mean: 64.40850","continent: Europe<br />year: 1957<br />mean: 66.70307","continent: Europe<br />year: 1962<br />mean: 68.53923","continent: Europe<br />year: 1967<br />mean: 69.73760","continent: Europe<br />year: 1972<br />mean: 70.77503","continent: Europe<br />year: 1977<br />mean: 71.93777","continent: Europe<br />year: 1982<br />mean: 72.80640","continent: Europe<br />year: 1987<br />mean: 73.64217","continent: Europe<br />year: 1992<br />mean: 74.44010","continent: Europe<br />year: 1997<br />mean: 75.50517","continent: Europe<br />year: 2002<br />mean: 76.70060","continent: Europe<br />year: 2007<br />mean: 77.64860"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(0,176,246,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(0,176,246,1)"}},"hoveron":"points","name":"Europe","legendgroup":"Europe","showlegend":true,"xaxis":"x","yaxis":"y2","hoverinfo":"text","frame":null},{"x":[1952,1957,1962,1967,1972,1977,1982,1987,1992,1997,2002,2007],"y":[69.255,70.295,71.085,71.31,71.91,72.855,74.29,75.32,76.945,78.19,79.74,80.7195],"text":["continent: Oceania<br />year: 1952<br />mean: 69.25500","continent: Oceania<br />year: 1957<br />mean: 70.29500","continent: Oceania<br />year: 1962<br />mean: 71.08500","continent: Oceania<br />year: 1967<br />mean: 71.31000","continent: Oceania<br />year: 1972<br />mean: 71.91000","continent: Oceania<br />year: 1977<br />mean: 72.85500","continent: Oceania<br />year: 1982<br />mean: 74.29000","continent: Oceania<br />year: 1987<br />mean: 75.32000","continent: Oceania<br />year: 1992<br />mean: 76.94500","continent: Oceania<br />year: 1997<br />mean: 78.19000","continent: Oceania<br />year: 2002<br />mean: 79.74000","continent: Oceania<br />year: 2007<br />mean: 80.71950"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":"rgba(231,107,243,1)","opacity":1,"size":5.66929133858268,"symbol":"circle","line":{"width":1.88976377952756,"color":"rgba(231,107,243,1)"}},"hoveron":"points","name":"Oceania","legendgroup":"Oceania","showlegend":true,"xaxis":"x2","yaxis":"y2","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":55.4520547945205,"r":7.30593607305936,"b":37.7916147779162,"l":34.8692403486924},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":"The mean of life expectancy over time in five continents","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"xaxis":{"domain":[0,0.329256360078278],"automargin":true,"type":"linear","autorange":false,"range":[1949.25,2009.75],"tickmode":"array","ticktext":["1950","1960","1970","1980","1990","2000"],"tickvals":[1950,1960,1970,1980,1990,2000],"categoryorder":"array","categoryarray":["1950","1960","1970","1980","1990","2000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y2","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"annotations":[{"text":"Year","x":0.5,"y":-0.0158260689082607,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"top","annotationType":"axis"},{"text":"Mean of Life Expectancy","x":-0.0113043349344719,"y":0.5,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-90,"xanchor":"right","yanchor":"center","annotationType":"axis"},{"text":"Africa","x":0.164628180039139,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Americas","x":0.5,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Asia","x":0.835371819960861,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Europe","x":0.164628180039139,"y":0.485159817351598,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"Oceania","x":0.5,"y":0.485159817351598,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(26,26,26,1)","family":"","size":11.689497716895},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"center","yanchor":"bottom"},{"text":"continent","x":1.02,"y":1,"showarrow":false,"ax":0,"ay":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"xref":"paper","yref":"paper","textangle":-0,"xanchor":"left","yanchor":"bottom","legendTitle":true}],"yaxis":{"domain":[0.514840182648402,1],"automargin":true,"type":"linear","autorange":false,"range":[37.0563,82.7987],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.329256360078278,"y0":0.514840182648402,"y1":1},{"type":"rect","fillcolor":"rgba(255,165,0,1)","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.329256360078278,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.337410306588389,"x1":0.662589693411611,"y0":0.514840182648402,"y1":1},{"type":"rect","fillcolor":"rgba(255,165,0,1)","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.337410306588389,"x1":0.662589693411611,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.670743639921722,"x1":1,"y0":0.514840182648402,"y1":1},{"type":"rect","fillcolor":"rgba(255,165,0,1)","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.670743639921722,"x1":1,"y0":0,"y1":23.37899543379,"yanchor":1,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.329256360078278,"y0":0,"y1":0.485159817351598},{"type":"rect","fillcolor":"rgba(255,165,0,1)","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":0.329256360078278,"y0":0,"y1":23.37899543379,"yanchor":0.485159817351598,"ysizemode":"pixel"},{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.337410306588389,"x1":0.662589693411611,"y0":0,"y1":0.485159817351598},{"type":"rect","fillcolor":"rgba(255,165,0,1)","line":{"color":"rgba(51,51,51,1)","width":0.66417600664176,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0.337410306588389,"x1":0.662589693411611,"y0":0,"y1":23.37899543379,"yanchor":0.485159817351598,"ysizemode":"pixel"}],"xaxis2":{"type":"linear","autorange":false,"range":[1949.25,2009.75],"tickmode":"array","ticktext":["1950","1960","1970","1980","1990","2000"],"tickvals":[1950,1960,1970,1980,1990,2000],"categoryorder":"array","categoryarray":["1950","1960","1970","1980","1990","2000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.337410306588389,0.662589693411611],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y2","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"xaxis3":{"type":"linear","autorange":false,"range":[1949.25,2009.75],"tickmode":"array","ticktext":["1950","1960","1970","1980","1990","2000"],"tickvals":[1950,1960,1970,1980,1990,2000],"categoryorder":"array","categoryarray":["1950","1960","1970","1980","1990","2000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0.670743639921722,1],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y2","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"yaxis2":{"type":"linear","autorange":false,"range":[37.0563,82.7987],"tickmode":"array","ticktext":["40","50","60","70","80"],"tickvals":[40,50,60,70,80],"categoryorder":"array","categoryarray":["40","50","60","70","80"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":9.29846409298464},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"domain":[0,0.485159817351598],"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":"","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"hoverformat":".2f"},"showlegend":true,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.689497716895},"y":0.96751968503937},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":[{"name":"Collaborate","icon":{"width":1000,"ascent":500,"descent":-50,"path":"M487 375c7-10 9-23 5-36l-79-259c-3-12-11-23-22-31-11-8-22-12-35-12l-263 0c-15 0-29 5-43 15-13 10-23 23-28 37-5 13-5 25-1 37 0 0 0 3 1 7 1 5 1 8 1 11 0 2 0 4-1 6 0 3-1 5-1 6 1 2 2 4 3 6 1 2 2 4 4 6 2 3 4 5 5 7 5 7 9 16 13 26 4 10 7 19 9 26 0 2 0 5 0 9-1 4-1 6 0 8 0 2 2 5 4 8 3 3 5 5 5 7 4 6 8 15 12 26 4 11 7 19 7 26 1 1 0 4 0 9-1 4-1 7 0 8 1 2 3 5 6 8 4 4 6 6 6 7 4 5 8 13 13 24 4 11 7 20 7 28 1 1 0 4 0 7-1 3-1 6-1 7 0 2 1 4 3 6 1 1 3 4 5 6 2 3 3 5 5 6 1 2 3 5 4 9 2 3 3 7 5 10 1 3 2 6 4 10 2 4 4 7 6 9 2 3 4 5 7 7 3 2 7 3 11 3 3 0 8 0 13-1l0-1c7 2 12 2 14 2l218 0c14 0 25-5 32-16 8-10 10-23 6-37l-79-259c-7-22-13-37-20-43-7-7-19-10-37-10l-248 0c-5 0-9-2-11-5-2-3-2-7 0-12 4-13 18-20 41-20l264 0c5 0 10 2 16 5 5 3 8 6 10 11l85 282c2 5 2 10 2 17 7-3 13-7 17-13z m-304 0c-1-3-1-5 0-7 1-1 3-2 6-2l174 0c2 0 4 1 7 2 2 2 4 4 5 7l6 18c0 3 0 5-1 7-1 1-3 2-6 2l-173 0c-3 0-5-1-8-2-2-2-4-4-4-7z m-24-73c-1-3-1-5 0-7 2-2 3-2 6-2l174 0c2 0 5 0 7 2 3 2 4 4 5 7l6 18c1 2 0 5-1 6-1 2-3 3-5 3l-174 0c-3 0-5-1-7-3-3-1-4-4-5-6z"},"click":"function(gd) { \n        // is this being viewed in RStudio?\n        if (location.search == '?viewer_pane=1') {\n          alert('To learn about plotly for collaboration, visit:\\n https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html');\n        } else {\n          window.open('https://cpsievert.github.io/plotly_book/plot-ly-for-collaboration.html', '_blank');\n        }\n      }"}],"cloud":false},"source":"A","attrs":{"1bd004e481331":{"x":{},"y":{},"type":"scatter"},"1bd00503f335d":{"colour":{},"x":{},"y":{}}},"cur_data":"1bd004e481331","visdat":{"1bd004e481331":["function (y) ","x"],"1bd00503f335d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"base_url":"https://plot.ly"},"evals":["config.modeBarButtonsToAdd.0.click"],"jsHooks":[]}</script>
<p>Many advantages that plotly has over ggplot2, such as:</p>
<ul>
<li>Interactive with graph.</li>
<li>Customizing the layout (plot borders, y axis) is easier.</li>
<li>Flexible for Python, Matlab, and Excel, among other languages.</li>
<li>Possible for multi-dimensions graph.</li>
</ul>
</div>
<div id="part-4-writing-figures-to-file" class="section level2">
<h2>Part 4: Writing figures to file</h2>
<p>Save the plot from the previous section to file.</p>
<pre class="r"><code>ggsave(&quot;my_plot.png&quot;, p_new, width = 10, height = 6, dpi = 300)</code></pre>
<p>Then read it out.</p>
<div class="figure">
<img src="my_plot.png" alt="Load the plot" />
<p class="caption">Load the plot</p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
